% Prepare SoundGo for deployment.
release: sh -c 'cd soundgo_api && python3 manage.py makemigrations && python3 manage.py migrate && echo "from accounts.models import Actor, CreditCard; from django.contrib.auth import get_user_model; from configuration.models import Configuration; from records.models import Category; UserAccount = get_user_model();\nConfiguration.objects.all().delete();\nconfig = Configuration.objects.create(maximum_radius=2000, minimum_radius=20, time_listen_advertisement=3, minimum_reports_ban=10); config.save();\nCategory.objects.all().delete();\ncategory1 = Category.objects.create(name='"'"'Leisure'"'"', maxTimeRecord=60, minDurationMap=259200); category1.save(); category2 = Category.objects.create(name='"'"'Experience'"'"', maxTimeRecord=60, minDurationMap=259200); category2.save(); category3 = Category.objects.create(name='"'"'Tourism'"'"', maxTimeRecord=60, minDurationMap=259200); category3.save();\nUserAccount.objects.all().delete();\nuser_account_u = UserAccount.objects.create_user_account('"'"'manuel'"'"', '"'"'Manuel123.'"'"'); actor_u = Actor.objects.create(user_account=user_account_u, email='"'"'manuel@gmail.com'"'"'); actor_u.save();\nuser_account_ad = UserAccount.objects.create_user_account('"'"'carlos'"'"', '"'"'Carlos123.'"'"'); credit_card = CreditCard.objects.create(holderName ='"'"'Carlos Mallado'"'"', brandName='"'"'MASTERCARD'"'"', number='"'"'5364212315362996'"'"', expirationMonth = 7, expirationYear = 21, cvvCode= 841, isDelete= False); actor_ad = Actor.objects.create(user_account=user_account_ad, email='"'"'carlos@gmail.com'"'"', credit_card = credit_card); actor_ad.save();\nuser_account_a = UserAccount.objects.create_super_user_account('"'"'rafael'"'"', '"'"'Rafael123.'"'"'); actor_a = Actor.objects.create(user_account=user_account_a, email='"'"'rafael@gmail.com'"'"'); actor_a.save();" | python3 ./manage.py shell'

% Deploy SoundGo.
web: sh -c 'cd soundgo_api && gunicorn soundgo_api.wsgi --log-file -'

% Delete marked ads.
deleteMarkedAds: sh -c 'cd soundgo_api && echo "from records.models import Advertisement;\nAdvertisement.objects.filter(isDelete=True).delete();" | python3 ./manage.py shell'
