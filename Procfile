% Prepare SoundGo for deployment.
release: sh -c 'cd soundgo_api && python3 manage.py makemigrations && python3 manage.py migrate && echo "from accounts.models import Actor, CreditCard; from django.contrib.auth import get_user_model; from configuration.models import Configuration; from records.models import Category; UserAccount = get_user_model();\nConfiguration.objects.all().delete();\nconfig = Configuration.objects.create(maximum_radius=2000, minimum_radius=20, time_listen_advertisement=3, minimum_reports_ban=10); config.save();\nCategory.objects.all().delete();\ncategory1 = Category.objects.create(name='"'"'Leisure'"'"', maxTimeRecord=60, minDurationMap=259200); category1.save(); category2 = Category.objects.create(name='"'"'Experience'"'"', maxTimeRecord=60, minDurationMap=259200); category2.save(); category3 = Category.objects.create(name='"'"'Tourism'"'"', maxTimeRecord=60, minDurationMap=259200); category3.save();\nUserAccount.objects.all().delete();\nuser_account_u_soundgo = UserAccount.objects.create_user_account('"'"'soundgouser'"'"', '"'"'Soundgouser123.'"'"'); actor_u_soundgo = Actor.objects.create(user_account=user_account_u_soundgo, email='"'"'soundgouser@email.com'"'"', photo='"'"'https://res.cloudinary.com/soundgo2/image/upload/v1554388354/photos/user.jpg'"'"'); actor_u_soundgo.save();\nuser_account_ad_soundgo = UserAccount.objects.create_user_account('"'"'soundgoadvertiser'"'"', '"'"'Soundgoadvertiser123.'"'"'); credit_card_ad_soundgo = CreditCard.objects.create(holderName ='"'"'SoundGo Advertiser'"'"', brandName='"'"'MASTERCARD'"'"', number='"'"'1111 2222 3333 4444'"'"', expirationMonth = 10, expirationYear = 22, cvvCode= 100, isDelete= False); actor_ad_soundgo = Actor.objects.create(user_account=user_account_ad_soundgo, email='"'"'soundgoadvertiser@email.com'"'"', credit_card = credit_card_ad_soundgo, photo='"'"'https://res.cloudinary.com/soundgo2/image/upload/v1554388358/photos/advertiser.jpg'"'"'); actor_ad_soundgo.save();\nuser_account_admin_soundgo = UserAccount.objects.create_super_user_account('"'"'soundgoadmin'"'"', '"'"'Soundgoadmin123.'"'"'); actor_admin_soundgo = Actor.objects.create(user_account=user_account_admin_soundgo, email='"'"'soundgoadmin@email.com'"'"', photo='"'"'https://res.cloudinary.com/soundgo2/image/upload/v1554388357/photos/admin.jpg'"'"'); actor_admin_soundgo.save();" | python3 ./manage.py shell'

% Deploy SoundGo.
web: sh -c 'cd soundgo_api && gunicorn soundgo_api.wsgi --log-file -'

% Scheduler.
clock: python3 soundgo_api/clock.py
